\doxysection{Pretty\+Json\+Serializer.\+hpp}
\hypertarget{_pretty_json_serializer_8hpp_source}{}\label{_pretty_json_serializer_8hpp_source}\index{lib/ArduinoJson/src/ArduinoJson/Json/PrettyJsonSerializer.hpp@{lib/ArduinoJson/src/ArduinoJson/Json/PrettyJsonSerializer.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{//\ ArduinoJson\ -\/\ https://arduinojson.org}}
\DoxyCodeLine{00002\ \textcolor{comment}{//\ Copyright\ Â©\ 2014-\/2023,\ Benoit\ BLANCHON}}
\DoxyCodeLine{00003\ \textcolor{comment}{//\ MIT\ License}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00006\ }
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ <ArduinoJson/Configuration.hpp>}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ <ArduinoJson/Json/JsonSerializer.hpp>}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#include\ <ArduinoJson/Serialization/measure.hpp>}}
\DoxyCodeLine{00010\ \textcolor{preprocessor}{\#include\ <ArduinoJson/Serialization/serialize.hpp>}}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ ARDUINOJSON\_BEGIN\_PRIVATE\_NAMESPACE}
\DoxyCodeLine{00013\ }
\DoxyCodeLine{00014\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TWriter>}
\DoxyCodeLine{00015\ \textcolor{keyword}{class\ }PrettyJsonSerializer\ :\ \textcolor{keyword}{public}\ JsonSerializer<TWriter>\ \{}
\DoxyCodeLine{00016\ \ \ \textcolor{keyword}{typedef}\ JsonSerializer<TWriter>\ base;}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \ \textcolor{keyword}{public}:}
\DoxyCodeLine{00019\ \ \ PrettyJsonSerializer(TWriter\ writer)\ :\ base(writer),\ nesting\_(0)\ \{\}}
\DoxyCodeLine{00020\ }
\DoxyCodeLine{00021\ \ \ \textcolor{keywordtype}{size\_t}\ visitArray(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_collection_data}{CollectionData}}\&\ array)\ \{}
\DoxyCodeLine{00022\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_variant_slot}{VariantSlot}}*\ slot\ =\ array.head();}
\DoxyCodeLine{00023\ \ \ \ \ \textcolor{keywordflow}{if}\ (slot)\ \{}
\DoxyCodeLine{00024\ \ \ \ \ \ \ base::write(\textcolor{stringliteral}{"{}[\(\backslash\)r\(\backslash\)n"{}});}
\DoxyCodeLine{00025\ \ \ \ \ \ \ nesting\_++;}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (slot\ !=\ 0)\ \{}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ indent();}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ slot-\/>data()-\/>accept(*\textcolor{keyword}{this});}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ slot\ =\ slot-\/>next();}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ base::write(slot\ ?\ \textcolor{stringliteral}{"{},\(\backslash\)r\(\backslash\)n"{}}\ :\ \textcolor{stringliteral}{"{}\(\backslash\)r\(\backslash\)n"{}});}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00033\ \ \ \ \ \ \ nesting\_-\/-\/;}
\DoxyCodeLine{00034\ \ \ \ \ \ \ indent();}
\DoxyCodeLine{00035\ \ \ \ \ \ \ base::write(\textcolor{stringliteral}{"{}]"{}});}
\DoxyCodeLine{00036\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00037\ \ \ \ \ \ \ base::write(\textcolor{stringliteral}{"{}[]"{}});}
\DoxyCodeLine{00038\ \ \ \ \ \}}
\DoxyCodeLine{00039\ \ \ \ \ \textcolor{keywordflow}{return}\ this-\/>bytesWritten();}
\DoxyCodeLine{00040\ \ \ \}}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \textcolor{keywordtype}{size\_t}\ visitObject(\textcolor{keyword}{const}\ \mbox{\hyperlink{class_collection_data}{CollectionData}}\&\ \textcolor{keywordtype}{object})\ \{}
\DoxyCodeLine{00043\ \ \ \ \ \textcolor{keyword}{const}\ \mbox{\hyperlink{class_variant_slot}{VariantSlot}}*\ slot\ =\ \textcolor{keywordtype}{object}.head();}
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordflow}{if}\ (slot)\ \{}
\DoxyCodeLine{00045\ \ \ \ \ \ \ base::write(\textcolor{stringliteral}{"{}\{\(\backslash\)r\(\backslash\)n"{}});}
\DoxyCodeLine{00046\ \ \ \ \ \ \ nesting\_++;}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (slot\ !=\ 0)\ \{}
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ indent();}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ base::visitString(slot-\/>key());}
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ base::write(\textcolor{stringliteral}{"{}:\ "{}});}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ slot-\/>data()-\/>accept(*\textcolor{keyword}{this});}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ slot\ =\ slot-\/>next();}
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ base::write(slot\ ?\ \textcolor{stringliteral}{"{},\(\backslash\)r\(\backslash\)n"{}}\ :\ \textcolor{stringliteral}{"{}\(\backslash\)r\(\backslash\)n"{}});}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \}}
\DoxyCodeLine{00056\ \ \ \ \ \ \ nesting\_-\/-\/;}
\DoxyCodeLine{00057\ \ \ \ \ \ \ indent();}
\DoxyCodeLine{00058\ \ \ \ \ \ \ base::write(\textcolor{stringliteral}{"{}\}"{}});}
\DoxyCodeLine{00059\ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00060\ \ \ \ \ \ \ base::write(\textcolor{stringliteral}{"{}\{\}"{}});}
\DoxyCodeLine{00061\ \ \ \ \ \}}
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordflow}{return}\ this-\/>bytesWritten();}
\DoxyCodeLine{00063\ \ \ \}}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \textcolor{keyword}{private}:}
\DoxyCodeLine{00066\ \ \ \textcolor{keywordtype}{void}\ indent()\ \{}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keywordflow}{for}\ (uint8\_t\ i\ =\ 0;\ i\ <\ nesting\_;\ i++)}
\DoxyCodeLine{00068\ \ \ \ \ \ \ base::write(ARDUINOJSON\_TAB);}
\DoxyCodeLine{00069\ \ \ \}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ uint8\_t\ nesting\_;}
\DoxyCodeLine{00072\ \};}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ ARDUINOJSON\_END\_PRIVATE\_NAMESPACE}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ ARDUINOJSON\_BEGIN\_PUBLIC\_NAMESPACE}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \textcolor{comment}{//\ Produces\ JsonDocument\ to\ create\ a\ prettified\ JSON\ document.}}
\DoxyCodeLine{00079\ \textcolor{comment}{//\ https://arduinojson.org/v6/api/json/serializejsonpretty/}}
\DoxyCodeLine{00080\ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ TDestination>}
\DoxyCodeLine{00081\ \textcolor{keywordtype}{size\_t}\ serializeJsonPretty(\mbox{\hyperlink{class_json_variant_const}{JsonVariantConst}}\ source,\ TDestination\&\ destination)\ \{}
\DoxyCodeLine{00082\ \ \ \textcolor{keyword}{using\ namespace\ }ArduinoJson::detail;}
\DoxyCodeLine{00083\ \ \ \textcolor{keywordflow}{return}\ serialize<PrettyJsonSerializer>(source,\ destination);}
\DoxyCodeLine{00084\ \}}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00086\ \textcolor{comment}{//\ Produces\ JsonDocument\ to\ create\ a\ prettified\ JSON\ document.}}
\DoxyCodeLine{00087\ \textcolor{comment}{//\ https://arduinojson.org/v6/api/json/serializejsonpretty/}}
\DoxyCodeLine{00088\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ serializeJsonPretty(\mbox{\hyperlink{class_json_variant_const}{JsonVariantConst}}\ source,\ \textcolor{keywordtype}{void}*\ buffer,}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{size\_t}\ bufferSize)\ \{}
\DoxyCodeLine{00090\ \ \ \textcolor{keyword}{using\ namespace\ }ArduinoJson::detail;}
\DoxyCodeLine{00091\ \ \ \textcolor{keywordflow}{return}\ serialize<PrettyJsonSerializer>(source,\ buffer,\ bufferSize);}
\DoxyCodeLine{00092\ \}}
\DoxyCodeLine{00093\ }
\DoxyCodeLine{00094\ \textcolor{comment}{//\ Computes\ the\ length\ of\ the\ document\ that\ serializeJsonPretty()\ produces.}}
\DoxyCodeLine{00095\ \textcolor{comment}{//\ https://arduinojson.org/v6/api/json/measurejsonpretty/}}
\DoxyCodeLine{00096\ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{size\_t}\ measureJsonPretty(\mbox{\hyperlink{class_json_variant_const}{JsonVariantConst}}\ source)\ \{}
\DoxyCodeLine{00097\ \ \ \textcolor{keyword}{using\ namespace\ }ArduinoJson::detail;}
\DoxyCodeLine{00098\ \ \ \textcolor{keywordflow}{return}\ measure<PrettyJsonSerializer>(source);}
\DoxyCodeLine{00099\ \}}
\DoxyCodeLine{00100\ }
\DoxyCodeLine{00101\ ARDUINOJSON\_END\_PUBLIC\_NAMESPACE}

\end{DoxyCode}
